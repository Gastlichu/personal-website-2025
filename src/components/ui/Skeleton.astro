---
/**
 * Skeleton - Loading placeholder with shimmer effect
 * Use for text, images, or any content that's loading
 */

interface Props {
  /** Width of the skeleton (CSS value) */
  width?: string;
  /** Height of the skeleton (CSS value) */
  height?: string;
  /** Border radius variant */
  rounded?: 'none' | 'sm' | 'md' | 'lg' | 'full';
  /** Additional CSS classes */
  class?: string;
}

const {
  width = '100%',
  height = '1rem',
  rounded = 'md',
  class: className = '',
} = Astro.props;

const roundedClasses = {
  none: 'rounded-none',
  sm: 'rounded-sm',
  md: 'rounded-md',
  lg: 'rounded-lg',
  full: 'rounded-full',
};
---

<div
  class:list={['skeleton', roundedClasses[rounded], className]}
  style={`width: ${width}; height: ${height};`}
  aria-hidden="true"
></div>

<style>
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-surface) 0%,
      var(--color-nebula) 50%,
      var(--color-surface) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  [data-theme="twilight"] .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-deep) 0%,
      var(--color-surface) 50%,
      var(--color-deep) 100%
    );
    background-size: 200% 100%;
  }

  @media (prefers-reduced-motion: reduce) {
    .skeleton {
      animation: none;
      background: var(--color-surface);
    }
  }
</style>
